<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="doRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <section class="contenu" *ngIf="feed; else showBlank">
    <ion-item
      *ngFor="let item of feed"
      style="margin-bottom: 10px; --inner-padding-end: 0"
    >
      <ion-card
        style="
          box-shadow: none;
          width: 100%;
          --background: #f4f5fa00;
          margin-right: 0;
          margin-left: 0;
        "
      >
        <ion-card-header
          *ngIf="item.isLive == false"
          (click)="openDetail(item)"
        >
          <ion-toolbar class="postZone">
            <ion-grid>
              <ion-row>
                <ion-col size="10">
                  <ion-item lines="none">
                    <ion-avatar style="margin-right: 10px" slot="start">
                      <img
                        src="../../assets/mocks/ToyFaces_Colored_BG_56@2x.png"
                      />
                    </ion-avatar>
                    <ion-label>
                      <p>{{ item.user.name }}</p>
                      <div style="display: flex; gap: 5px; align-items: center">
                        <img src="../../assets/icon/testIconCateg.svg" alt="" />
                        <p style="font-size: 10px; font-weight: 900">
                          {{ item.activity }}
                        </p>
                        <ion-note style="font-size: 10px"
                          >Il y'a 5 min</ion-note
                        >
                      </div>
                    </ion-label>
                  </ion-item>
                </ion-col>
                <ion-col size="2" style="--ion-grid-column-padding: 20px">
                  <img
                    src="../../assets/icon/threeDot.svg"
                    alt=""
                    style="height: 20px"
                  />
                </ion-col>
              </ion-row>
            </ion-grid>
          </ion-toolbar>
          <p style="padding-left: 20px; margin: 0">{{ item.title }}</p>
          <div *ngIf="item.src" class="postPhoto">
            <ion-skeleton-text></ion-skeleton-text>
            <!-- <video
            #player
            playsinline
            preload="auto"
            autoplay="true"
            (click)="sound()"
          >
            <source [src]="item.src" type="video/mp4" />
          </video> -->
          </div>
          <div *ngIf="!item.src" class="postPhoto">
            <ion-skeleton-text></ion-skeleton-text>
          </div>
        </ion-card-header>
        <ion-card-header *ngIf="item.isLive == true" (click)="openDetail(item)">
          <ion-item lines="none" class="liveZone">
            <ion-avatar style="margin-right: 10px" slot="start">
              <img src="../../assets/mocks/ToyFaces_Colored_BG_56@2x.png" />
            </ion-avatar>
            <ion-label>
              <p>
                {{ item.user.name }}
                <ion-icon
                  name="ellipse"
                  style="font-size: 6px; margin-right: 5px"
                ></ion-icon>
                <ion-note style="font-size: 10px">Il y'a 5 min</ion-note>
              </p>
              <div style="display: flex; gap: 5px; align-items: center">
                <img src="../../assets/icon/testIconCateg.svg" alt="" />
                <p style="font-size: 10px; font-weight: 900">
                  {{ item.activity }}
                </p>
                <ion-icon name="ellipse" style="font-size: 6px"></ion-icon>
                <p class="liveIndicator">LIVE</p>
              </div>
            </ion-label>
          </ion-item>
        </ion-card-header>
        <ion-card-content style="padding: 0">
          <div style="display: flex; justify-content: space-between">
            <img src="../../assets/icon/Icon feather-share-2.svg" alt="" />
            <img
              (click)="presentPopover($event)"
              src="../../assets/icon/Icon material-add-circle-outline.svg"
              alt=""
            />
            <ion-chip outline>
              <div class="emot">
                <img src="../../assets/emojis/Happy.png" alt="" />
              </div>
              <ion-label *ngIf="item.reactions">{{
                item.reactions.like
              }}</ion-label>
            </ion-chip>
            <ion-chip outline>
              <div class="emot">
                <img src="../../assets/emojis/Sleepy.png" alt="" />
              </div>
              <ion-label *ngIf="item.reactions">{{
                item.reactions.dislike
              }}</ion-label>
            </ion-chip>
            <ion-chip outline>
              <div class="emot">
                <img src="../../assets/emojis/Sad.png" alt="" />
              </div>
              <ion-label *ngIf="item.reactions">{{
                item.reactions.shit
              }}</ion-label>
            </ion-chip>
          </div>
        </ion-card-content>
      </ion-card>
    </ion-item>
  </section>
  <ng-template #showBlank>
    <!-- <ion-thumbnail> -->
    <!-- <img src="assets/mocks/Groupe 3959.png" alt="" />
    </ion-thumbnail> -->
    <!-- </ng-template> -->
    <ion-card class="blank">
      <img src="assets/mocks/Groupe 3959.png" alt="" />
      <ion-card-header>
        <ion-card-title style="text-align: center"
          >Aucun post pour le moment</ion-card-title
        >
        <ion-card-subtitle style="text-align: center"
          >Vous pourrez suivre ici l’activité de tous les participants de cette
          compétition</ion-card-subtitle
        >
      </ion-card-header>
    </ion-card>
  </ng-template>
  <ion-infinite-scroll threshold="100px" (ionInfinite)="loadData($event)">
    <ion-infinite-scroll-content
      loadingSpinner="bubbles"
      loadingText="Loading more data..."
    >
    </ion-infinite-scroll-content>
  </ion-infinite-scroll>
</ion-content>
