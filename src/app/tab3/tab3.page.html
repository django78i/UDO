<ion-header mode="ios">
  <ion-toolbar
    style="padding: 5px 15px; --border-width: 0; --background: #f7f7fa"
    mode="ios"
  >
    <ion-avatar slot="start" class="big" (click)="showMenu()" *ngIf="user">
      <img [src]="user.avatar" alt="" />
      <ion-badge>{{ user.niveau }}</ion-badge>
    </ion-avatar>
    <ion-title>
      <img src="../../assets/icon/udoIcon.svg" alt="" />
    </ion-title>
    <ion-buttons slot="end">
      <ion-button (click)="chatPage()">
        <img src="../../assets/icon/chat.svg" alt="" />
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div
    class="banniere"
    *ngIf="challenges|async as chall"
    [style.background]="bannData.background"
  >
    <div style="display: flex; flex-direction: column">
      <img
        [src]="bannData.icon"
        alt=""
        style="
          margin-right: 10px;
          background-color: white;
          border-radius: 50%;
          padding: 5px;
          width: 30px;
          height: 30px;
        "
      />
      <h3
        style="
          font-size: 28px;
          font-weight: 900;
          color: white;
          max-width: 78%;
          line-height: 1;
        "
      >
        {{bannData.name}}
      </h3>
      <ion-note
        style="
          font-size: 12px;
          font-weight: 900;
          color: rgba(255, 255, 255, 0.5);
          display: flex;
          align-items: center;
          gap: 7px;
        "
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="15"
          height="16.033"
          viewBox="0 0 18.827 16.033"
        >
          <defs>
            <style>
              .a {
                fill: none;
                stroke: rgba(255, 255, 255, 0.596);
                stroke-linecap: round;
                stroke-linejoin: round;
                stroke-width: 2.5px;
              }
            </style>
          </defs>
          <g transform="translate(1.25 1.425)">
            <path
              class="a"
              d="M13.374,26.953V25.469A2.969,2.969,0,0,0,10.406,22.5H4.469A2.969,2.969,0,0,0,1.5,25.469v1.484"
              transform="translate(-1.5 -13.594)"
            />
            <path
              class="a"
              d="M13.437,7.469A2.969,2.969,0,1,1,10.469,4.5a2.969,2.969,0,0,1,2.969,2.969Z"
              transform="translate(-4.531 -4.5)"
            />
            <path
              class="a"
              d="M32.226,27.051V25.567A2.969,2.969,0,0,0,30,22.7"
              transform="translate(-15.899 -13.693)"
            />
            <path
              class="a"
              d="M24,4.7a2.969,2.969,0,0,1,0,5.752"
              transform="translate(-12.868 -4.599)"
            />
          </g>
        </svg>
        {{bannData.participants}} participants
      </ion-note>
    </div>
  </div>
  <ng-template #banTemplate>
    <ion-card style="height: 250px; width: 93%; border-radius: 30px">
      <ion-thumbnail style="height: 100%; width: 100%">
        <ion-skeleton-text animated></ion-skeleton-text>
      </ion-thumbnail>
    </ion-card>
  </ng-template>
  <div style="position: relative; height: 80px">
    <div style="width: 100%; position: absolute; top: -100px">
      <app-slider-challenge
        [challenges]="chall"
        *ngIf="challenges|async as chall; else tempChall"
        (slide)="challChoice($event)"
      >
      </app-slider-challenge>
    </div>
  </div>
  <ion-segment [value]="segmentValue" mode="ios">
    <ion-segment-button value="championnats">
      <ion-label>Championnats</ion-label>
    </ion-segment-button>
    <ion-segment-button value="challenges">
      <ion-label>Challenges</ion-label>
    </ion-segment-button>
  </ion-segment>
  <div style="width: 100%; margin-top: 15px">
    <div class="iconTitle">
      <img
        src="../../assets/icon/dot.svg"
        style="
          background-color: rgb(233, 229, 229);
          padding: 10px;
          border-radius: 50%;
        "
        alt=""
      />
      <h4 style="font-weight: 900; margin: 0">EN COURS</h4>
    </div>

      <app-user-championnats-slide
        [championnats]="userChampionnats"
        (champ)="champModal($event)"
        *ngIf="userChampionnats"
      >
      </app-user-championnats-slide>
  </div>
  <ion-item
    button
    (click)="buttonClick()"
    lines="none"
    style="margin-bottom: 20px; margin-top: 20px"
  >
    <ion-icon
      name="trophy-outline"
      style="
        padding: 10px;
        border-radius: 50%;
        border: 1px solid grey;
        margin-right: 10px;
      "
    ></ion-icon>

    <ion-label>
      <p>Nouveau championnat</p>
      <p>Cr√©ez vos propre</p>
    </ion-label>
  </ion-item>
  <div style="width: 100%">
    <div class="iconTitle">
      <img
        src="../../assets/icon/dot.svg"
        style="
          background-color: rgb(233, 229, 229);
          padding: 10px;
          border-radius: 50%;
        "
        alt=""
      />
      <h4 style="font-weight: 900; margin: 0">EN ATTENTE</h4>
    </div>

    <app-slider-championnat
      (champ)="launchDetail($event)"
      [championnats]="championnatsList"
      *ngIf="championnatsList"
    ></app-slider-championnat>
  </div>
  <div style="width: 100%; margin-bottom: 100px; margin-top: 15px">
    <div class="iconTitle">
      <img
        src="assets/icon/dot.svg"
        style="
          background-color: rgb(233, 229, 229);
          padding: 10px;
          border-radius: 50%;
        "
        alt=""
      />
      <h4 style="font-weight: 900; margin: 0">NETWORK</h4>
    </div>

    <ng-template *ngIf="!loaderNetwork">
      <app-slider-network
        [championnats]="championnatsNetwork"
        *ngIf="championnatsNetwork || !loaderNetwork;else tempNetWork"
      ></app-slider-network>
    </ng-template>
  </div>
  <ng-template #tempChamp>
    <swiper #swiper [config]="config" style="padding-left: 0">
      <ng-template swiperSlide *ngFor="let chall of temporaire">
        <ion-card style="height: 170px; width: 100%; border-radius: 30px">
          <ion-card-header style="padding: 20px">
            <ion-item class="template" lines="none">
              <ion-avatar slot="start">
                <ion-skeleton-text animated></ion-skeleton-text>
              </ion-avatar>
              <ion-label>
                <ion-skeleton-text
                  animated
                  style="width: 20%"
                ></ion-skeleton-text>
                <ion-skeleton-text
                  animated
                  style="width: 40%"
                ></ion-skeleton-text>
              </ion-label>
              <ion-avatar slot="end">
                <ion-skeleton-text animated></ion-skeleton-text>
              </ion-avatar>
            </ion-item>
          </ion-card-header>

          <ion-card-content class="cardContent">
            <ion-item
              style="--background: transparent; width: 100%"
              lines="none"
            >
              <ion-skeleton-text
                animated
                style="width: 30%"
                slot="start"
              ></ion-skeleton-text>
              <ion-skeleton-text
                animated
                style="width: 20%"
                slot="end"
              ></ion-skeleton-text>
            </ion-item>
          </ion-card-content>
        </ion-card>
      </ng-template>
    </swiper>
  </ng-template>
  <ng-template #tempChall>
    <swiper #swiper [config]="config" style="padding-left: 0">
      <ng-template swiperSlide *ngFor="let chall of temporaire">
        <ion-card
          style="
            height: 170px;
            width: 100%;
            border-radius: 30px;
            margin: 0 20px;
          "
        >
          <ion-card-header style="padding: 20px">
            <ion-item class="template" lines="none">
              <ion-avatar slot="start" style="">
                <ion-skeleton-text animated></ion-skeleton-text>
              </ion-avatar>
              <ion-label>
                <ion-skeleton-text
                  animated
                  style="width: 50%"
                ></ion-skeleton-text>
              </ion-label>
            </ion-item>
          </ion-card-header>

          <ion-card-content class="cardContentZone">
            <ion-skeleton-text
              animated
              style="width: 30%"
              slot="start"
            ></ion-skeleton-text>
            <ion-skeleton-text
              animated
              style="width: 80%"
              slot="start"
            ></ion-skeleton-text>
          </ion-card-content>
        </ion-card>
      </ng-template>
    </swiper>
  </ng-template>
  <ng-template #tempNetWork>
    <swiper #swiper [config]="config" style="padding-left: 0">
      <ng-template swiperSlide *ngFor="let chall of temporaire">
        <ion-card style="height: 257px; width: 100%; border-radius: 30px">
          <ion-card-header style="padding: 20px">
            <ion-item class="template" lines="none">
              <ion-avatar slot="start">
                <ion-skeleton-text animated></ion-skeleton-text>
              </ion-avatar>
              <ion-label>
                <ion-skeleton-text
                  animated
                  style="width: 20%"
                ></ion-skeleton-text>
                <ion-skeleton-text
                  animated
                  style="width: 40%"
                ></ion-skeleton-text>
              </ion-label>
              <ion-avatar slot="end">
                <ion-skeleton-text animated></ion-skeleton-text>
              </ion-avatar>
            </ion-item>
          </ion-card-header>

          <ion-card-content class="cardContent">
            <ion-item
              style="--background: transparent; width: 100%"
              lines="none"
            >
              <ion-skeleton-text
                animated
                style="width: 30%"
                slot="start"
              ></ion-skeleton-text>
              <ion-skeleton-text
                animated
                style="width: 20%"
                slot="end"
              ></ion-skeleton-text>
            </ion-item>
          </ion-card-content>
        </ion-card>
      </ng-template>
    </swiper>
  </ng-template>
</ion-content>
